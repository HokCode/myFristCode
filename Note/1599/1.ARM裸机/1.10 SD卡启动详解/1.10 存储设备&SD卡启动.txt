1.10
	1.主流的外存设备介绍
		
		内存和外存的区别
			
			内存(RAM):随机访问存储器，可任意字节读写。掉电丢失。
			外存(ROM):只读存取器。不能随机地址访问，只能以块为单位访问。但掉电不丢失。
			
		(1)软盘、硬盘、光盘、CD、磁带	
			
			1.存储原理大部分为磁存储。技术成熟，价格便宜。但是读写速度慢、可靠性欠缺。
			
			2.如今存储的发展方向是Flash存储，闪存计数是利用电学原理存储1和0，从而制成存储设备。所以闪存设备没有物理运动(指硬盘中的磁头)，读写速度快无物理损耗。以下都是Flash存储。
			
		(2)纯碎Flash、NandFlash、NorFlash
			
			1.最早出现的Flash颗粒组成芯片。NandFlash、NorFlash芯片中只对存储单元做了最基本的读写接口，然后要求外部的SoC来提供Flash读写的控制器来和FLash进行读写时序。
			
			2.读写接口时序比较复杂；内部无坏块处理机制，需要SoC自己来管理Flash的坏块；各家厂家的flash接口不一致，同一厂家不同型号或系列的接口也不一致。
			
			3.NandFlash分MLC和SLC两种。SLC技术可靠性高，但是容量做不大(太贵了，一般都是512MB以下)。MLC可靠性差，但是容量可以做得很大(相对便宜，目前发展趋势，如以下的卡)。
			
		(3)SD卡、MMC卡、MicroSD、TF卡
			
			1.这些卡内部就是Flash存储颗粒，不过多了统一的外部封装和接口。
			
			2.每种卡都有统一的标准。如SD卡规范:读写速度、读写时序、读写命令集、卡大小尺寸、引脚个数。这样可以让不同厂家的SD卡都可以通用。
			
		(4)iNand、MoviNand、eSSD
			
			1.近年电子产品(手机、相机)等的趋势都是直接内置大容量Flash芯片，不用外部扩展卡(时间久了卡槽可能会接触不良)。
			
			2.本质还是NandFlash，内部由Nand的存储颗粒构成，但集合了块设备管理单元。综合了SD卡(还有其他卡)和原始NandFlash芯片的优势。
			
			优势：
			1.有统一的接口标准，如引脚定义、物理封装、接口时序(SD优势)。
			2.以芯片方式来发布(原始Nand优势)。
			3.内部内置了Flash管理模块，提供了坏块管理等功能。
			
			SSD(固态硬盘)：本质与eSSD一样，但是SSD做成了硬盘，eSSD做成了芯片。
			
	2.SD卡详解
		
		(1)SD卡和MMC卡的关系
			
			MMC标准比SD标准早，SD标准兼容MMC标准。MMC卡可以被SD读卡器读写，但SD卡不能被MMC读卡器读写。
			
		(2)SD卡与MicroSD(TF卡)的区别
			
			1.传输与存储原理相同，但体积大小不同。
			2.SD卡有写保护，TF卡没有。

	3.SD卡的编程接口
		
		(1)SD卡的物理接口
			
			1.由9个针脚与外界进行物理连接，这9个脚中有2个地，1个电源，6个信号线。
			
		(2)SD卡与SPI协议
			
			1.SRAM/DDR/SROM之类的存储芯片是总线式的，只要连接上初始化好之后就可以由SoC直接以地址方式来访问；但SD卡不能直接通过接口给地址来访问，需要按照一定的接口协议(时序)来访问。
			
			2.SD卡只有一种物理接口，支持两种读写协议：SD协议和SPI协议。
		
		(3)SPI协议特点(低速、接口操作时序简单、适合单片机)
			
			1.SPI协议是单片机中广泛使用的一种通信协议。
			
			2.SPI协议相对SD协议来说速度较低。
			
			3.SD卡支持SPI协议，是为了单片机方便使用。
			
		(4)SD协议特点(高速、接口时序复杂、适合有SDIO接口的SoC)	
			
			1.SD协议是专门用来和SD卡通信的。
			
			2.SD协议要求SoC中有SD控制器，运行在高速率下，要求SoC的主频不能太低。
			
		(5)S5PV210的SD/MMC控制器
			
			1.SD卡内部出了存储单元Flash外，还有SD卡管理模块。SoC和SD卡通信时，通过9针并以SD协议/SPI协议向SD卡管理模块发送命令、时钟、数据等信息，然后从SD卡返回信息给SoC形成交互。
	
	4.SD卡启动详解1
		
		(1)SoC支持SD卡启动
			
			1.启动方式越多，使用起来越方便，适用面越广；用户可选择性也越大。
			
			2.可以不借用烧录工具(Jlink)的情况下进行刷机。
			
		(2)SD卡启动难点(SRAM、DDR、SDCard)
			
			1.SRAM不需初始化可直接使用；DDR需要初始化才可使用。
			
			2.SD卡需要时序访问，CPU不能直接和SD卡打交道。
			
		(3)SD卡启动流程
			
			第一种情况：整个镜像(bin)大小小于16KB时，整个bin会作为BL1被stepping stone直接硬件加载执行。
			第二种情况：整个镜像(bin)大小大于16KB时，就要把整个镜像分为2部分(16KB和剩下大小)。第1部分作为BL1启动，负责初始化DRAM并且将第二部分加载到DRAM去执行(uboot)。
			
		(4)隐含重点
			
			1.iROM如何读取SD卡/NandFlash
			
				三星在iROM中事先内置了一些代码去初始化外部SD卡/NandFlash，并内置了读取各种SD卡/NandFlash的代码。
			
				BL0执行时就是通过调用这些device copy function来读取外部SD卡/NandFlash中的BL1。
			
	5.SD卡启动详解2

		(1)SoC支持SD卡启动(iROM代码)
			
			内部iROM代码支持的SteppingStone技术。
			
		(2)Device Copy Function
			
		(3)扇区和块的概念
			
			1.早期的块设备是软盘硬盘这类磁存储设备，这种设备的存储单元是以扇区为单位的，所以读写的最小单元是扇区。
			
			2.一个扇区早期一般是512个字节，后来可以做到更大(1024、2048、4096)，但是很多的软件(包括操作系统和文件系统)已经默认为512。
			
			3.一个扇区可以看成一个块block(多个字节组成的一个共同操作单元)，所以就把这类设备称为块设备。如：磁存储设备(软盘、硬盘、DVD)和Flash设备(U盘、SSD、SD卡、NandFlash、NorFlash、eMMC、iNand)。
			
			4.linux中的mtd驱动就是用来管理这类块设备。
			
			5.因为磁盘和Flash要以块为单位来读写，所以启动时device copy function只能以整块为单位来读取SD卡。
			
	